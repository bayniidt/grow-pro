<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | Grow</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" type="image/x-icon" href="./favorite.ico">
    <meta name="description" content="Vuepress blog">
    <link rel="preload" href="/grow-pro/assets/css/0.styles.ff741fdf.css" as="style"><link rel="preload" href="/grow-pro/assets/js/app.6ffc7541.js" as="script"><link rel="preload" href="/grow-pro/assets/js/2.d587827d.js" as="script"><link rel="preload" href="/grow-pro/assets/js/8.2dcb3418.js" as="script"><link rel="prefetch" href="/grow-pro/assets/js/10.d880a209.js"><link rel="prefetch" href="/grow-pro/assets/js/11.5f6043b9.js"><link rel="prefetch" href="/grow-pro/assets/js/12.a458c2d0.js"><link rel="prefetch" href="/grow-pro/assets/js/13.a73c1e16.js"><link rel="prefetch" href="/grow-pro/assets/js/14.1094f6da.js"><link rel="prefetch" href="/grow-pro/assets/js/15.1792dde8.js"><link rel="prefetch" href="/grow-pro/assets/js/16.80e4c64a.js"><link rel="prefetch" href="/grow-pro/assets/js/17.b9051b86.js"><link rel="prefetch" href="/grow-pro/assets/js/18.6cf5bea3.js"><link rel="prefetch" href="/grow-pro/assets/js/19.b2c73de6.js"><link rel="prefetch" href="/grow-pro/assets/js/20.7788614a.js"><link rel="prefetch" href="/grow-pro/assets/js/21.efe0dcb7.js"><link rel="prefetch" href="/grow-pro/assets/js/22.a8696bf8.js"><link rel="prefetch" href="/grow-pro/assets/js/23.6902d694.js"><link rel="prefetch" href="/grow-pro/assets/js/24.1b1592a9.js"><link rel="prefetch" href="/grow-pro/assets/js/25.b3d8a4aa.js"><link rel="prefetch" href="/grow-pro/assets/js/26.b3435ff0.js"><link rel="prefetch" href="/grow-pro/assets/js/27.b69152b4.js"><link rel="prefetch" href="/grow-pro/assets/js/28.b06054b6.js"><link rel="prefetch" href="/grow-pro/assets/js/29.a5bdc6e9.js"><link rel="prefetch" href="/grow-pro/assets/js/3.8793c774.js"><link rel="prefetch" href="/grow-pro/assets/js/30.c01e36cb.js"><link rel="prefetch" href="/grow-pro/assets/js/31.7ec4de84.js"><link rel="prefetch" href="/grow-pro/assets/js/32.c3dda9c4.js"><link rel="prefetch" href="/grow-pro/assets/js/33.3852b17d.js"><link rel="prefetch" href="/grow-pro/assets/js/34.b6b5c5fb.js"><link rel="prefetch" href="/grow-pro/assets/js/35.7cc5f650.js"><link rel="prefetch" href="/grow-pro/assets/js/36.8b5378e0.js"><link rel="prefetch" href="/grow-pro/assets/js/37.766c1f24.js"><link rel="prefetch" href="/grow-pro/assets/js/4.2a59d3b3.js"><link rel="prefetch" href="/grow-pro/assets/js/5.e100d029.js"><link rel="prefetch" href="/grow-pro/assets/js/6.ec12bce6.js"><link rel="prefetch" href="/grow-pro/assets/js/7.4ad449a3.js"><link rel="prefetch" href="/grow-pro/assets/js/9.61ea6a8a.js">
    <link rel="stylesheet" href="/grow-pro/assets/css/0.styles.ff741fdf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/grow-pro/" class="home-link router-link-active"><img src="./image/logo.jpg" alt="Grow" class="logo"> <span class="site-name can-hide">Grow</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/grow-pro/Learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/grow-pro/Work.html" class="nav-link">
  Work
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/grow-pro/Learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/grow-pro/Work.html" class="nav-link">
  Work
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Learn</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/grow-pro/Learn/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/grow-pro/Learn/Git.html" class="sidebar-link">Git</a></li><li><a href="/grow-pro/Learn/JavaSrcipt.html" class="sidebar-link">JavaSrcipt</a></li><li><a href="/grow-pro/Learn/React.html" aria-current="page" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#jsx" class="sidebar-link">JSX</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#state" class="sidebar-link">state</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#生命周期函数" class="sidebar-link">生命周期函数</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#setstate" class="sidebar-link">setState</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#条件渲染" class="sidebar-link">条件渲染</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#列表渲染" class="sidebar-link">列表渲染</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#表单" class="sidebar-link">表单</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#refs-dom" class="sidebar-link">Refs &amp; DOM</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#状态提升" class="sidebar-link">状态提升</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#react-router" class="sidebar-link">react-router</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#redux" class="sidebar-link">Redux</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#fragment" class="sidebar-link">Fragment</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#高阶组件" class="sidebar-link">高阶组件</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#hook" class="sidebar-link">Hook</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#usestate" class="sidebar-link">useState</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#useeffect" class="sidebar-link">useEffect</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#useref" class="sidebar-link">useRef</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#usecontext" class="sidebar-link">useContext</a></li></ul></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#-2" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#-3" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#-4" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#-5" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/grow-pro/Learn/React.html#-6" class="sidebar-link"></a></li></ul></li><li><a href="/grow-pro/Learn/TypeSrcipt.html" class="sidebar-link">TypeSrcipt</a></li><li><a href="/grow-pro/Learn/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/grow-pro/Learn/Vue3.html" class="sidebar-link">Vue3.0</a></li><li><a href="/grow-pro/Learn/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/grow-pro/Learn/小程序.html" class="sidebar-link">小程序</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Work</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目记录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="react"><a href="#react" class="header-anchor">#</a> React</h3> <blockquote><p>react与vue相同，都是数据驱动视图，react适用于大型项目，vue适用于小型项目</p></blockquote> <h2 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h2> <p><strong>JSX：JS + XML</strong>类似于html标签的语法，作用于js中直接写html代码，具有js代码的全部能力，可以在jsx代码中插入变量或者表达式，用jsx语法写出来的语句是一个对象，可以存在一个变量中，然后作为render函数的第一个参数传入， <strong>最终的目的是为了封装组件</strong></p> <ul><li>JSX对象是一个普通的JS对象，又称之为React元素。它是<a href="https://en.wikipedia.org/wiki/Immutable_object" target="_blank" rel="noopener noreferrer">不可变对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，一旦被创建，就无法更改它的子元素或者属性，一个元素就像电影的单帧，代表了某个特定时刻的UI</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
    注意：
        1·最外层只有一个标签，可以使用小括号()包裹，也可以不用
        2·插入变量或表达式，使用{}单大括号
*/</span>
<span class="token keyword">let</span> el <span class="token operator">=</span> <span class="token punctuation">(</span>
    
    <span class="token keyword">let</span> sTr <span class="token operator">=</span> <span class="token string">'Hello world'</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* jsx中的注释 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>jsx<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 插入表达式 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span> num<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 插入函数调用 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token function">fn</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* js方法反转字符串 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span> sTr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><p><code>ReactDOM.render</code> 渲染页面</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">/* 
        ReactDOM: react的内置对象
        render: 接收两个参数，
            参数1: 一个jsx对象，或者是一个组件 参数2:获取元素要插入的容器
            作用就是将写好的jsx对象放到DOM容器中
     */</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>jsx<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>JSX的优点</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> <span class="token constant">JSX</span>执行更快，编译为<span class="token constant">JS</span>代码是进行优化（虚拟<span class="token constant">DOM</span>，<span class="token constant">DIFF</span>算法）
<span class="token number">2.</span> 类型安全，编译出错就不能编译，及时发现错误
<span class="token number">3.</span> <span class="token constant">JSX</span>编写模板更简单便捷
<span class="token number">4.</span> 由<span class="token constant">HTML</span>元素构成，可以快速插入<span class="token constant">JS</span>变量<span class="token operator">/</span>表达式
<span class="token number">5.</span> ReactDOM<span class="token punctuation">.</span>render有<span class="token number">2</span>个参数，第一个是需要渲染的<span class="token constant">JSX</span>对象，第二个参数是<span class="token constant">JSX</span>挂载的跟<span class="token constant">DOM</span>对象

注意：
<span class="token number">1.</span> <span class="token constant">JSX</span>必须有根节点
<span class="token number">2.</span> 正常的普通<span class="token constant">HTML</span>元素要小写，如果是大写，会默认为组件
<span class="token number">3.</span> <span class="token constant">HTML</span>的样式类名要写className ，因为<span class="token keyword">class</span>在js中是关键词
<span class="token number">4.</span> img标签的src值不用加引号
</code></pre></div><h2 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h2> <blockquote><p>组件文件的后缀名，可以是js，也可以是jsx，例如vue的 App.vue ，在React中，一切都是由组件来组成，一个项目中有可能有成千上万个组件，根据高内聚低耦合的思想，将功能组件化
组件可分为：</p></blockquote> <ol><li><p>根据组件定义方式：函数式组件(Functional Component)， 类组件(Class Component)</p></li> <li><p>根据组件内部是否有状态需要维护：无状态组件(Stateless Component)，有状态组件(Stateful Component)</p></li> <li><p>根据组件不同的职责： 展示型组件(Presentational Component)，容器型组件(Container Component)</p> <ul><li>函数组件、无状态组件、展示型组件主要关注「UI的展示」</li> <li>类组件、有状态组件、容器型组件主要关注「数据逻辑」</li></ul></li></ol> <ul><li><code>class</code> 类组件</li></ul> <p>继承<code>React.Component</code> , 渲染<code>render(){}</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> 
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Props属性</li></ul> <p>组件复用性，Props用来传递数据， 与Vue的父子传值Props类似
Props不可以被修改，遵循数据单向流思想。</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 父组件</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cosnt navList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'JS'</span><span class="token punctuation">,</span><span class="token string">'JAVA'</span><span class="token punctuation">,</span><span class="token string">'C++'</span><span class="token punctuation">,</span><span class="token string">'NODEJS'</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'周一'</span><span class="token punctuation">,</span><span class="token string">'周二'</span><span class="token punctuation">,</span><span class="token string">'周三'</span><span class="token punctuation">,</span><span class="token string">'周四'</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>MyNav navList<span class="token operator">=</span><span class="token punctuation">{</span>navList<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">'课程'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>MyNav navList<span class="token operator">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">'日期'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 子组件</span>
<span class="token keyword">class</span> <span class="token class-name">MyNav</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>navList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>ele<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>函数式组件
函数式组件没有生命周期,函数式组件主要关注UI的展示</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Components</span><span class="token punctuation">(</span><span class="token parameter">prps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>props<span class="token punctuation">.</span>data<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="state"><a href="#state" class="header-anchor">#</a> state</h2> <p>组件中的状态：state ， 不再操作DOM，页面元素的改变使用state进行处理</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">StateCom</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token comment">// state状态： 类似Vue的data</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token number">10</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 箭头函数this自动绑定为外层上下文</span>
    <span class="token function-variable function">decremen</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* 此处的this为绑定当前class*/</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* 使用箭头函数不需要绑定this*/</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="生命周期函数"><a href="#生命周期函数" class="header-anchor">#</a> 生命周期函数</h2> <blockquote><p>在组件被渲染完毕之前调用setState方法不会启动更新生命周期。在组件渲染完成之后调用setState方法就会启动更新生命周期。
<img src="/grow-pro/image/react-life.png"></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>函数列表：
    componentWillMount<span class="token operator">:</span> 在组件渲染之前执行    
    componentDidMount<span class="token operator">:</span> 在组件渲染之后执行
    shouldComponentUpdate<span class="token operator">:</span> 返回<span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span>，<span class="token boolean">true</span>代表允许改变，<span class="token boolean">false</span>代表不允许改变
    componentWillUpdate：数据改变之前执行
    componentDidUpdate：数据修改完成
    componentWillReveiceProps：props发生改变之前执行
    componentWillUnmount：组件卸载之前执行

数据传递：
    父传子：在子组件标签名直接以属性方式传递，子组件使用props接收
    子传父：调用父组件的回调函数
</code></pre></div><p><code>shouldComponentUpdate</code>:
参数1为新的props，参数2为新的state。可以根据这两个参数来判断返回的状态，来确定子组件是否随着父组件的更新而更新</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>num <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="setstate"><a href="#setstate" class="header-anchor">#</a> setState</h2> <ol><li>setState会引起视图重绘</li> <li>在可控的情况下是异步，在非可控的情况下是同步的</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SetStateDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 此处打印是异步的</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 此处打印是同步的</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setStateAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 此处打印是同步的</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 使用Promise封装setState为同步执行函数, 配合async await</span>
    <span class="token function-variable function">setStateAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>resolve<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                setState同步还是异步？
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>修改<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="条件渲染"><a href="#条件渲染" class="header-anchor">#</a> 条件渲染</h2> <p>常用的应用场景：</p> <ol><li>对视图条件进行切换（登陆界面切换）</li> <li>做缺省值（ajax请求没有数据返回时渲染的结果）</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">IfDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            isLogin<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handlerLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isLogin<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> isLogin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>已登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> logOut <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>未登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>isLogin <span class="token operator">?</span> login <span class="token operator">:</span> logOut<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerLogin<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">'登出'</span> <span class="token operator">:</span> <span class="token string">'登陆'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="列表渲染"><a href="#列表渲染" class="header-anchor">#</a> 列表渲染</h2> <p>主要问题是Key, 与Vue的v-for相同，key增加虚拟DOM的对比，提高DIFF算法的性能</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">KeyDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            list<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> job<span class="token operator">:</span> <span class="token string">'milkMan'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Emi'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> job<span class="token operator">:</span> <span class="token string">'teacher'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'jony'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> job<span class="token operator">:</span> <span class="token string">'dustWoman'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handlAddPerson</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">'Swit'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> job<span class="token operator">:</span> <span class="token string">'engineer'</span><span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            list<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token punctuation">(</span>
                            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>name<span class="token operator">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>age<span class="token operator">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> 
                                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>job<span class="token operator">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>job<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> 
                            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                        <span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlAddPerson<span class="token punctuation">}</span><span class="token operator">&gt;</span>AddPerson<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="表单"><a href="#表单" class="header-anchor">#</a> 表单</h2> <ol><li>受控组件：表单中的value值通过state管理
<ul><li>每个表单都需要绑定指定的change事件，在少量表单的情况下可以使用受控组件</li></ul></li> <li>非受控组件：表单中的value值通过操作DOM的方式处理，不通过state管理
<ul><li>如果同事需要多个表单，例如input select ... 可以使用非受控组件处理，要了解非受控组件，需要先了解Refs与DOM</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 受控组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">FormDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token function-variable function">hanldeSubmit</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* form表单中的onSubmit事件要写在form标签上*/</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span><span class="token comment">/* 阻止默认提交跳转事件也在onSubmit处理函数中显式阻止 */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hanldeSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;type&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">-</span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">'submit'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="refs-dom"><a href="#refs-dom" class="header-anchor">#</a> Refs &amp; DOM</h2> <blockquote><p>React.createRef对象创建一个ref对象</p></blockquote> <ul><li>Ref使用场景：
<ol><li>管理焦点，文本选择或媒体播放</li> <li>触发强制动画</li> <li>集成第三方 DOM 库</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ref使用方式</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">RefAndDomDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 调用createRef函数创建一个Ref对象</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>RefDiv <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// DOM渲染完成</span>
    <span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           绑定ref之前：{current: null}
           绑定ref之后：{current: div}
           current指向为当前绑定的DOM节点
        */</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>RefDiv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 通过current可以直接进行DOM节点操作</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>RefDiv<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>RefDiv<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                Ref And <span class="token constant">DOM</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 非受控组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">RefFormDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 通过ref的形式可以直接获取指定的表单value，而不用每个表单都添加onchange事件，并且value不由state管理</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                非受控组件
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="状态提升"><a href="#状态提升" class="header-anchor">#</a> 状态提升</h2> <blockquote><p>组件之间的数据交互，将多个子组件交互的状态提升到父组件，再通过父组件传值的方式传递到子组件中</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><h2 id="react-router"><a href="#react-router" class="header-anchor">#</a> react-router</h2> <p>安装命令：<code>npm ireact-router-dom --save</code></p> <p>路由的作用：
单页面应用（SPA），路由跳转：切换视图显示</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token comment">/*
            所有需要路由跳转的页面最外层由 &lt;Router /&gt; 对象包裹
            path：路由跳转路径
            component：路由跳转组件
            注意： 最外层Router有r 里层Route没r
            */</span>
            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/mine'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Mine<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>BrowserRouter</code> &amp; <code>HashRouter</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// HashRouter: 使用锚点链接形式，一般情况下会自动转换为a标签。地址栏会带#号</span>
<span class="token comment">// BrowserRouter：使用H5新特性， history.push 上线后需要后台做重定向，否则会有404BUG</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
</code></pre></div><blockquote><p><code>Link</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>  Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Nav</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
                        <span class="token comment">// 要跳转的地址</span>
                        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/home'</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/mine'</span><span class="token operator">&gt;</span>Mine<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>exact</code> &amp; <code>strict</code></p></blockquote> <p>exact: 路径精准匹配，地址不匹配则不渲染</p> <p>strict: 路径严格匹配，末尾添加斜杠不允许匹配</p> <p>以上两个属性同时使用 否则strict不生效</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Nav <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route exact strict path<span class="token operator">=</span><span class="token string">'/mine'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Mine<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/mine/ucenter'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UCenter<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>Switch</code> 匹配唯一一个页面，404页面时需要</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Nav <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token comment">// 使用Switch包裹住需要匹配的页面</span>
                <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route exact strict path<span class="token operator">=</span><span class="token string">'/mine'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Mine<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/mine/ucenter'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UCenter<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>路由跳转携带参数</p></blockquote> <ol><li>通过在路由地址后添加:(参数名)的方式传递，并且在组件中使用<code>props.match.params.参数名</code>接收</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// APP</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
                    <span class="token comment">// 参数名后添加?号代表参数可有可无</span>
                    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/mine/ucenter/:id?'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UCenter<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// UCenter</span>
<span class="token keyword">const</span> <span class="token function-variable function">UCenter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span> 
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            Hello UCenter <span class="token operator">:</span> 
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> id<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>使用<code>new URLSearchParams(props.location.search)</code>读取地址栏参数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// URL为：http://localhost:3000/mine/name=iwen&amp;age=20</span>
<span class="token keyword">const</span> <span class="token function-variable function">Mine</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            Mine
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>name <span class="token operator">-</span> <span class="token punctuation">{</span>params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>age <span class="token operator">-</span> <span class="token punctuation">{</span>params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>



</code></pre></div><ol start="3"><li>使用<code>querystring.parse</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> querystring <span class="token keyword">from</span> <span class="token string">'querystring'</span>
<span class="token comment">// URL: http://localhost:3000/mine?name=iwn&amp;age=20</span>
<span class="token keyword">const</span> <span class="token function-variable function">Mine</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
    <span class="token comment">// 注意第一个参数前的问号?</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token string">'?name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            Mine 
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>重定向 <code>&lt;Redirect from='/hellomine' to='/mine' /&gt;</code> 只要输入hellomine都会跳转到mine</p></blockquote> <p>重定向的作用：登陆判断或权限判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Redirect <span class="token keyword">from</span><span class="token operator">=</span><span class="token string">'/hellomine'</span> to<span class="token operator">=</span><span class="token string">'/mine'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route exact strict path<span class="token operator">=</span><span class="token string">'/mine'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Mine<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>props.history.push('/')</code> 跳转指定路由</p></blockquote> <p>history对象中的方法：</p> <ul><li><code>push()</code> : 叠加，可以后退</li> <li><code>go()</code></li> <li><code>goBack()</code></li> <li><code>replace()</code>： 退换，不可后退</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Mine</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token function-variable function">handlerClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            Mine
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handlerClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>black<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>Prompt</code>：类似于离开弹框提示是否确定要离开</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Shop</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token comment">// when属性只支持布尔值类型数据，所以使用双感叹号获取布尔值</span>
                <span class="token operator">&lt;</span>Prompt when<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span> message<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'确定离开？'</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="redux"><a href="#redux" class="header-anchor">#</a> Redux</h2> <ul><li>React中的数据传递： props，回传时间，共同的父元素或子元素中间传递。在多个文件需要互相传递数据时，就可以使用Redux来管理传递的数据（状态）。与vuex功能相似</li></ul> <p>安装命令： <code>npm i --save-dev redux</code></p> <blockquote><p>创建Store:  <code>createStore</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">// 引入reducer （修改state的唯一方法）</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducers/counter'</span>

<span class="token comment">// 创建仓库</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span>


<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>App
                <span class="token punctuation">{</span><span class="token comment">/* 传递事件dispatch类型 */</span><span class="token punctuation">}</span>
                onIncrement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'INC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                onDecrement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'DEC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span><span class="token comment">/* 获取数据 并传到子组件 */</span><span class="token punctuation">}</span>
                value<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 首次渲染DOM</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 监听数据变化</span>
store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>Action</code>
Action是把数据从应用传到store的唯一来源，本质上是一个js对象，再action内必须使用一个字符串类型的type属性来表示将要执行的动作。</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 这是一个基本的action num为Action创建函数接收的参数，type为即将要执行的动作</span>
<span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;INC&quot;</span><span class="token punctuation">,</span>
    num
<span class="token punctuation">}</span>

<span class="token comment">// 这是一个基本的Action创建函数，它将一个基本的action作为结果返回，一般情况下只需要将改函数传递给store.dispatch即可</span>
<span class="token keyword">function</span> <span class="token constant">INC</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&quot;INC&quot;</span><span class="token punctuation">,</span>
        num
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>Reducer</code>
Reducer指定了应用状态的变化如何响应actions并发送到store的，actions只是描述了有事情发生了这个事实，并没有描述应用如何更新state。</p></blockquote> <p>reducer就是一个纯函数，接收旧的state和action，并返回新的state。**注意：**保持reducer函数的纯净，不允许修改传入的参数，API请求，路由跳转，调用非纯函数等操作</p> <p><strong>state:是只读的，唯一改变state的方法就是触发action，action是一个用于描述已经发生事件的普通对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接受两个参数，根据action的type来进行判断，并把最新的state返回</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> actions<span class="token punctuation">.</span><span class="token constant">INC</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">+</span> action<span class="token punctuation">.</span>num
        <span class="token keyword">case</span> actions<span class="token punctuation">.</span><span class="token constant">DEC</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">-</span> action<span class="token punctuation">.</span>num
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>npm --save-dev react-redux</code> 将react与redux关联</p></blockquote> <ul><li><code>Provider</code> &amp; <code>connect</code>
store 里能直接通过 store.dispatch() 调用 dispatch() 方法，但是多数情况下你会使用 react-redux 提供的 connect() 帮助器来调用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
        <span class="token comment">// 使用Provider包裹组件</span>
        <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span>

<span class="token comment">// App.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token operator">&gt;</span>increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token operator">&gt;</span>decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 状态处理方法</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        counter<span class="token operator">:</span> state
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用connect将状态处理函数与App组件关联</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>bindActionCreators</code>
把一个 value 为不同 action creator 的对象，转成拥有同名 key 的对象。同时使用 dispatch 对每个 action creator 进行包装，以便可以直接调用它们。bindActionCreators() 可以自动把多个 action 创建函数 绑定到 dispatch() 方法上。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入所有的dispatch</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> counterActions <span class="token keyword">from</span> <span class="token string">'./actions/counter'</span>
<span class="token comment">// 引入bindActionCreators</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bindActionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
        <span class="token comment">// 打印结果 { counter: 0, increment: ƒ, decrement: ƒ }</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>counter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>counterActions<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>counterActions<span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        counter<span class="token operator">:</span> state
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将所有的dispatch与组件连接？</span>
        counterActions<span class="token operator">:</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>counterActions<span class="token punctuation">,</span>dispatch<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>combineReducers</code>
合并reducer</p></blockquote> <h2 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h2> <p>类似与Vue的template，在结构中不会渲染，只做容器用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Demo1 <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Demo<span class="token punctuation">;</span>
</code></pre></div><h2 id="高阶组件"><a href="#高阶组件" class="header-anchor">#</a> 高阶组件</h2> <ol><li>高阶组件必须是一个函数</li> <li>参数是一个组件</li> <li>返回值也是一个组件</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// Components形参为一个组件</span>
<span class="token comment">// 该函数返回一个组件 可以在这个函数中做各种业务处理</span>
<span class="token keyword">const</span> <span class="token function-variable function">withFetch</span> <span class="token operator">=</span> <span class="token parameter">Components</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token comment">/* 展开props */</span>
                <span class="token operator">&lt;</span>Components <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里的高阶组件意义：  让MyData在被渲染之前经过withFetch的一层处理，再进行渲染</span>
<span class="token keyword">class</span> <span class="token class-name">MyData</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                MyData<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// WithFetch 为 经过withFetch处理过返回的组件</span>
<span class="token keyword">const</span> WithFetch <span class="token operator">=</span> <span class="token function">withFetch</span><span class="token punctuation">(</span>MyData<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>WithFetch data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'Hello WithFetch'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>高阶组件实际应用： 提高代码复用性</p> <ul><li>两个相似的组件，只有API请求的URL不同和渲染数据不同，就可以使用高阶组件来提出重复代码</li></ul> <img src="/grow-pro/image/react-components.png"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// withFetch.jsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token comment">// 注意这里的函数写法，2个箭头函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">withFetch</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token parameter">View</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// 状态</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
                loading<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> <span class="token keyword">null</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 处理API网络请求</span>
        <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        loading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        data
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 渲染页面</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span> 
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>View data<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> withFetch
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// NewBanenr.jsx</span>
<span class="token keyword">import</span> withFetch <span class="token keyword">from</span> <span class="token string">'../weithFetch'</span>

<span class="token keyword">const</span> NewBanenr <span class="token operator">=</span> <span class="token function">withFetch</span><span class="token punctuation">(</span><span class="token string">'http://iwenwiki.com/api/blueberrypai/getIndexBanner.php'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>banner<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token punctuation">(</span>
                            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
                                <span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                        <span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> NewBanenr

<span class="token comment">// NewChengpin.jsx</span>
<span class="token keyword">import</span> weithFetch <span class="token keyword">from</span> <span class="token string">'../weithFetch'</span>

<span class="token keyword">const</span> NewChengpin <span class="token operator">=</span> <span class="token function">weithFetch</span><span class="token punctuation">(</span><span class="token string">'http://iwenwiki.com/api/blueberrypai/getChengpinInfo.php'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>chengpinInfo<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token punctuation">(</span>
                            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                <span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                        <span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> NewChengpin
</code></pre></div><h2 id="hook"><a href="#hook" class="header-anchor">#</a> Hook</h2> <p>hook: 钩子 。在react函数式组件中，无法使用state、生命周期等功能，hook提供了这些功能，并且让组件之间复用状态逻辑变得更加容易，也不用再去编写难懂的class类组件，生命周期函数，让组件编写与复用变得更容易。</p> <h3 id="usestate"><a href="#usestate" class="header-anchor">#</a> <code>useState</code></h3> <p>创建一个state状态，并赋予初始值，react在更新时会保留这个state，并且会返回一个与this.setState函数功能一致的更新操作函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
        使用数组解构，将调用useState函数返回的值解构出来，传递的参数为state初始值
    **/</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 点击事件触发调用setCount函数并更改count的值 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token constant">CLICKME</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> <code>useEffect</code></h3> <p>useEffect === componentDidMount、componentDidUpdate、componentWillUnMount</p> <p>react将这三个生命周期函数合并成一个useEffect Hook ，可以在useEffect中发送API网络请求或者进行DOM更新等等操作，也可以清除事件监听、定时器等等。 <strong>React会在每次寻然后调用useEffect传入的函数</strong></p> <ul><li><p>useEffect 参数1：更新后执行的函数（可以是API网络请求 或者 DOM操作）</p> <ul><li>如果在参数1的函数中返回的也是一个函数，那么这个函数相当于在componentWillUnMount生命周期时执行的销毁函数（关闭定时器、取消事件监听等等）</li></ul></li> <li><p>useEffect 参数2： <code>[stateName]</code> 监听指定的state，当该state发生变化时才会重新更新useEffect Hook</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 初始化state</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>money<span class="token punctuation">,</span> setMoney<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// 等同于 componentDidMount + componentDidUpdate</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">// 更新浏览器title</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span>
        
        <span class="token comment">// 组件销毁时调用，重置count</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 与useState一样 可以多次重复使用，将不同的业务逻辑代码抽离，不用将他们写在同一个生命周期函数中</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span>
        <span class="token comment">// 参数2为state监听，当指定的state发生变化时，才会重新更新useEffect Hook</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>money<span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token punctuation">}</span>

</code></pre></div><h3 id="useref"><a href="#useref" class="header-anchor">#</a> <code>useRef</code></h3> <blockquote><p>useRef 返回一个可变的 ref 对象，其 .current 属性被初始化为传入的参数（initialValue）。返回的 ref 对象在组件的整个生命周期内保持不变。.current是一个实时状态，useRef 会在每次渲染时返回同一个 ref 对象，并且.current发生变化时不会重新渲染组件。常用于DOM访问</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> domRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>domRef <span class="token operator">&amp;&amp;</span> domRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用DOM事件</span>
        domRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>domRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="usecontext"><a href="#usecontext" class="header-anchor">#</a> <code>useContext</code></h3> <blockquote><p>在React中，全局状态（语言类型中英文、主题、用户信息...）在程序中很多组件都需要使用，传递全局状态的时候就可以使用useContext，避免多层传递，调用了 useContext 的组件总会在 context 值变化时重新渲染。如果重渲染组件的开销较大，你可以 通过使用 memoization 来优化。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// App.jsx</span>
<span class="token keyword">const</span> themes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'light'</span><span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'#000'</span><span class="token punctuation">,</span> background<span class="token operator">:</span> <span class="token string">'#eee'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'dark'</span><span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span> background<span class="token operator">:</span> <span class="token string">'#222'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用React.createContext创建一个context,传入的参数是默认值</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ThemesContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span>themes<span class="token punctuation">.</span>light<span class="token punctuation">)</span>

<span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token comment">// 使用ThemesContext.Provider 将需要共享状态的组件包裹 value也是初始值</span>
    <span class="token comment">// Provider代表的是数据提供者 与vue的Provide inject功能相似</span>
    <span class="token operator">&lt;</span>ThemesContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>themes<span class="token punctuation">.</span>light<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>son <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemesContext<span class="token punctuation">.</span>provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// son.jsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./App'</span> <span class="token comment">// 导入ThemeContext</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span> <span class="token comment">// 将context传递到useContext函数，就可以拿到App传递的themes</span>

</code></pre></div><h2 id=""><a href="#" class="header-anchor">#</a></h2> <h2 id="-2"><a href="#-2" class="header-anchor">#</a></h2> <h2 id="-3"><a href="#-3" class="header-anchor">#</a></h2> <h2 id="-4"><a href="#-4" class="header-anchor">#</a></h2> <h2 id="-5"><a href="#-5" class="header-anchor">#</a></h2> <h2 id="-6"><a href="#-6" class="header-anchor">#</a></h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/grow-pro/Learn/JavaSrcipt.html" class="prev">
        JavaSrcipt
      </a></span> <span class="next"><a href="/grow-pro/Learn/TypeSrcipt.html">
        TypeSrcipt
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/grow-pro/assets/js/app.6ffc7541.js" defer></script><script src="/grow-pro/assets/js/2.d587827d.js" defer></script><script src="/grow-pro/assets/js/8.2dcb3418.js" defer></script>
  </body>
</html>
