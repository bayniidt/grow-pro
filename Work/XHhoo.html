<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小虎Hoo | Grow</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" type="image/x-icon" href="./favorite.ico">
    <meta name="description" content="Vuepress blog">
    <link rel="preload" href="/grow-pro/assets/css/0.styles.ff741fdf.css" as="style"><link rel="preload" href="/grow-pro/assets/js/app.6ffc7541.js" as="script"><link rel="preload" href="/grow-pro/assets/js/2.d587827d.js" as="script"><link rel="preload" href="/grow-pro/assets/js/26.b3435ff0.js" as="script"><link rel="prefetch" href="/grow-pro/assets/js/10.d880a209.js"><link rel="prefetch" href="/grow-pro/assets/js/11.5f6043b9.js"><link rel="prefetch" href="/grow-pro/assets/js/12.a458c2d0.js"><link rel="prefetch" href="/grow-pro/assets/js/13.a73c1e16.js"><link rel="prefetch" href="/grow-pro/assets/js/14.1094f6da.js"><link rel="prefetch" href="/grow-pro/assets/js/15.1792dde8.js"><link rel="prefetch" href="/grow-pro/assets/js/16.80e4c64a.js"><link rel="prefetch" href="/grow-pro/assets/js/17.b9051b86.js"><link rel="prefetch" href="/grow-pro/assets/js/18.6cf5bea3.js"><link rel="prefetch" href="/grow-pro/assets/js/19.b2c73de6.js"><link rel="prefetch" href="/grow-pro/assets/js/20.7788614a.js"><link rel="prefetch" href="/grow-pro/assets/js/21.efe0dcb7.js"><link rel="prefetch" href="/grow-pro/assets/js/22.a8696bf8.js"><link rel="prefetch" href="/grow-pro/assets/js/23.6902d694.js"><link rel="prefetch" href="/grow-pro/assets/js/24.1b1592a9.js"><link rel="prefetch" href="/grow-pro/assets/js/25.b3d8a4aa.js"><link rel="prefetch" href="/grow-pro/assets/js/27.b69152b4.js"><link rel="prefetch" href="/grow-pro/assets/js/28.b06054b6.js"><link rel="prefetch" href="/grow-pro/assets/js/29.a5bdc6e9.js"><link rel="prefetch" href="/grow-pro/assets/js/3.8793c774.js"><link rel="prefetch" href="/grow-pro/assets/js/30.c01e36cb.js"><link rel="prefetch" href="/grow-pro/assets/js/31.7ec4de84.js"><link rel="prefetch" href="/grow-pro/assets/js/32.c3dda9c4.js"><link rel="prefetch" href="/grow-pro/assets/js/33.3852b17d.js"><link rel="prefetch" href="/grow-pro/assets/js/34.b6b5c5fb.js"><link rel="prefetch" href="/grow-pro/assets/js/35.7cc5f650.js"><link rel="prefetch" href="/grow-pro/assets/js/36.8b5378e0.js"><link rel="prefetch" href="/grow-pro/assets/js/37.766c1f24.js"><link rel="prefetch" href="/grow-pro/assets/js/4.2a59d3b3.js"><link rel="prefetch" href="/grow-pro/assets/js/5.e100d029.js"><link rel="prefetch" href="/grow-pro/assets/js/6.ec12bce6.js"><link rel="prefetch" href="/grow-pro/assets/js/7.4ad449a3.js"><link rel="prefetch" href="/grow-pro/assets/js/8.2dcb3418.js"><link rel="prefetch" href="/grow-pro/assets/js/9.61ea6a8a.js">
    <link rel="stylesheet" href="/grow-pro/assets/css/0.styles.ff741fdf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/grow-pro/" class="home-link router-link-active"><img src="./image/logo.jpg" alt="Grow" class="logo"> <span class="site-name can-hide">Grow</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/grow-pro/Learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/grow-pro/Work.html" class="nav-link">
  Work
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/grow-pro/Learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/grow-pro/Work.html" class="nav-link">
  Work
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Learn</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Work</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/grow-pro/Work/CSS选择器复习.html" class="sidebar-link">CSS选择器复习</a></li><li><a href="/grow-pro/Work/ClickCopy.html" class="sidebar-link">单击复制</a></li><li><a href="/grow-pro/Work/History.html" class="sidebar-link">解决Mac上无法使用phpstudy启动项目问题</a></li><li><a href="/grow-pro/Work/Interview.html" class="sidebar-link">面试记录</a></li><li><a href="/grow-pro/Work/InterviewQuestions.html" class="sidebar-link">面试题</a></li><li><a href="/grow-pro/Work/Mqtt.html" class="sidebar-link">mqtt前端链接与使用方式</a></li><li><a href="/grow-pro/Work/Object.create.html" class="sidebar-link">Object.create()</a></li><li><a href="/grow-pro/Work/Promise.html" class="sidebar-link">异步请求数据返回时机不一致出现闪屏现象解决</a></li><li><a href="/grow-pro/Work/UEditor.html" class="sidebar-link">UEditor富文本编辑器与嵌入秀米</a></li><li><a href="/grow-pro/Work/UTF-8字节数.html" class="sidebar-link">UNICODE与字符集字节</a></li><li><a href="/grow-pro/Work/Vue Proxy代理解决跨域.html" class="sidebar-link">Vue Proxy代理解决跨域的使用记录</a></li><li><a href="/grow-pro/Work/XHhoo.html" aria-current="page" class="active sidebar-link">小虎Hoo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#_2020-05-14-项目总结-第一阶段" class="sidebar-link">2020-05-14 项目总结(第一阶段)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#代码设计" class="sidebar-link">代码设计</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#功能耦合" class="sidebar-link">功能耦合</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#git代码管理" class="sidebar-link">Git代码管理</a></li><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#环境配置" class="sidebar-link">环境配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/grow-pro/Work/XHhoo.html#_2020-05-30-项目总结-第二阶段" class="sidebar-link">2020-05-30 项目总结(第二阶段)</a></li></ul></li><li><a href="/grow-pro/Work/el-table横向滚动条视窗显示.html" class="sidebar-link">/Work/el-table横向滚动条视窗显示.html</a></li><li><a href="/grow-pro/Work/extend.html" class="sidebar-link">高德地图setLabel，继承使用DataV边框组件，无法渲染Datav边框</a></li><li><a href="/grow-pro/Work/lazyComponets.html" class="sidebar-link">vue单页面中需要注册多个组件的优化方法</a></li><li><a href="/grow-pro/Work/nginx.html" class="sidebar-link">nginx 反向代理基础使用</a></li><li><a href="/grow-pro/Work/treeData.html" class="sidebar-link">树形数据处理</a></li><li><a href="/grow-pro/Work/websocket.html" class="sidebar-link">工作中的websocket使用</a></li><li><a href="/grow-pro/Work/xss攻击.html" class="sidebar-link">前端安全</a></li><li><a href="/grow-pro/Work/函数式编程学习.html" class="sidebar-link">函数式编程</a></li><li><a href="/grow-pro/Work/发布订阅.html" class="sidebar-link">发布订阅</a></li><li><a href="/grow-pro/Work/递归调用Ajax请求.html" class="sidebar-link">在递归中进行Ajax请求，并进行对应处理</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目记录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="小虎hoo"><a href="#小虎hoo" class="header-anchor">#</a> 小虎Hoo</h1> <h2 id="_2020-05-14-项目总结-第一阶段"><a href="#_2020-05-14-项目总结-第一阶段" class="header-anchor">#</a> 2020-05-14 项目总结(第一阶段)</h2> <h3 id="代码设计"><a href="#代码设计" class="header-anchor">#</a> 代码设计</h3> <ul><li><p>原型需求：多层tabs嵌套，加入select下拉筛选数据，分页查看数据</p> <ul><li><p>一级tabs固定写死，每个tabs对应自己的table表，第三个tab有二级tabs</p></li> <li><p>二级tabs后台返回数据渲染，根据类型不同渲染不同的table表，大致分为banner广告类型与text图文类型，text图文类型有三级tabs</p></li> <li><p>三级tabs固定写死，根据二级tabs不同渲染不同的tabs，分为：分类table与内容table</p></li> <li><p>每一张表格都有增删改查功能，上下排序功能，分页功能，显示/隐藏状态开关功能</p> <ul><li><p>排序功能：上升&amp;下降，接口需要传递对应的id（上升传当前触发排序id与上一条数据id ，下降相同）</p></li> <li><p>分页功能：</p></li> <li><p>显示/隐藏状态：第一逻辑：隐藏状态下的排序自动后移</p></li></ul> <img src="/grow-pro/image/XHhoo-01.png"> <img src="/grow-pro/image/XHhoo-02.png"></li></ul></li> <li><p>代码设计：</p> <ul><li><p>在没有完全理解产品功能需求以前：</p> <ul><li>一级tabs：主页面单独组件，使用动态组件的方式，每当tabs切换就动态渲染对应的组件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    components<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">List</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 模块分类列表</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./moduleSortList&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">EntryList</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 子模块列表</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./subModuleList&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">Collocate</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 子模块配置</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./subModuleCollocate&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><ul><li>二级tabs：二级tabs由后台返回的数据渲染，当一级tabs切换到子模块配置后，在子模块配置中又使用了动态组件的方式，渲染不同类型的（banner广告与text图文）组件</li></ul> <blockquote><p>在触发二级tabs切换时，又使用了bannerModule与textModule组件（这里完全没有必要）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>      components<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">Img_banner</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./subModuleCollocate/img_bannerModule&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">AboveAndBelow</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./subModuleCollocate/aboveAndBelow_Module&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><ul><li>三级tabs：固定写死</li></ul> <blockquote><p>以上大致上就是没有经过设计的代码逻辑，基本上是想怎么写怎么写，完全没有考虑组件耦合，功能耦合，代码耦合的问题。最后代码耦合度巨高，导致出现了无数个小BUG，修改BUGA引发BUGB，大部分时间都浪费在修BUG上，所以必须设计好组件与代码的逻辑模式，否则就会出现这种问题</p></blockquote></li> <li><p>第二次重构当前模块：</p> <ul><li><p>一级tabs：固定写死的，切割为固定的三个组件（只有第三个tab才有二级tabs）。每个组件负责自己的渲染，降低了一点代码耦合。</p></li> <li><p>二级tabs：后台获取数据渲染。也根据类型切割为txt_banner与pic_banner组件，根据当前激活的tabs类型渲染指定的类型组件</p></li> <li><p>三级tabs：固定写死，直接写在了txt_banner组件中（只有txt_banner才有三级tabs）</p></li> <li><p>添加与编辑功能：切割为单独的组件（addOrEdit_content，addOrEdit_banner），根据路由跳转传参类型判断是添加或编辑</p></li></ul> <blockquote><p>也许是因为第二次写，或是经过了思考如何将需求功能划分，第二次写起来的速度与BUG数量都大大降低，代码耦合度也与第一次差别巨大，当前组件只负责自己的事，不需要花里胡哨的传参与组件渲染</p></blockquote> <img src="/grow-pro/image/XHhoo-03.png"></li></ul></li></ul> <h3 id="功能耦合"><a href="#功能耦合" class="header-anchor">#</a> 功能耦合</h3> <ol><li><p>使用相同的table表（在tabs切换时数据没有实时请求更新）</p></li> <li><p>添加与编辑功能使用相同的弹框组件（数据遗留）</p></li> <li><p>分页组件使用同一个 （tabs切换后分页不重置导致请求数据错误）</p></li> <li><p>select下拉筛选与table表使用同一份数据 （添加新的数据后select没有更新，并且筛选选定后切换tabs请求参数不重置）</p></li> <li><p>上下排序功能与显示隐藏逻辑 （后台只返回指定的条数数据10条，第一页就无法判断第二页的情况，所以发了两份请求，一份请求10条，一份请求所有），需求：首条隐藏上升排序按钮，最后一条显示隐藏下降排序按钮</p></li> <li><p>跳转编辑或添加新的路由，完成后返回指定跳转的位置 （三层tabs嵌套后的位置，目前解决方案：将当前tabs位置保存到本地，每次加载时从本地读取）</p></li></ol> <h3 id="git代码管理"><a href="#git代码管理" class="header-anchor">#</a> Git代码管理</h3> <ul><li><p>develop : 测试</p></li> <li><p>release : 预发</p></li> <li><p>master : 正式</p></li></ul> <div class="language-git extra-class"><pre class="language-git"><code>    git add . 
    git commit -m <span class="token string">&quot;&quot;</span>
    git push 
    git pull
    git checkout 
    git branch -a 
    git merge origin/

    每天上班时拉取代码，下班时推送代码

    在build时出现冲突，将dist包删除重新build

    在merge合并时出现冲突，手动将冲突解决（注意冲突代码差异）

    commit 失败 将.git文件夹中的hooks中的pre-commit文件，重新commit

    git config core.ignorecase false 启用大小写敏感

</code></pre></div><h3 id="环境配置"><a href="#环境配置" class="header-anchor">#</a> 环境配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">BUILDING</span> <span class="token constant">ING</span><span class="token operator">...</span>
</code></pre></div><h2 id="_2020-05-30-项目总结-第二阶段"><a href="#_2020-05-30-项目总结-第二阶段" class="header-anchor">#</a> 2020-05-30 项目总结(第二阶段)</h2> <ul><li><p>问题：</p> <ol><li><p>三端连调</p></li> <li><p>H5页面时间处理</p></li> <li><p>需求评审时没有发现的不合理的问题，遗留到开发阶段出现BUG后，需要修改大量代码</p></li> <li><p>H5页面上传图片，安卓系统不能多选图片，IOS可以多选图片</p></li> <li><p>将基地址改为https后七牛云无法使用</p></li></ol></li> <li><p>解决：</p> <ol><li><p>H5单页面主要作用于用户分享，IOS/安卓/PC都可以使用，在没有经过三端连调的时候就提测，导致在测试时出现多个问题。例如图片上传的单选与多选，图片适配屏幕等等。遇到这种单页面分享功能，尽早的和相关同事进行调试，可以正常使用了再提测。</p></li> <li><p>后台返回的是一个标准格式的时间，使用dayjs转化为时间戳，再根据产品需求做对应的渲染</p></li> <li><p>在开需求评审会时一定要仔细想清楚自己负责的模块有没有不合理的地方，否则最后也是自己背锅</p></li> <li><p>其实就是没有进行三端连调导致的后果，最后解决方法将ios改成单张上传</p></li> <li><p>原因很简单，七牛云更新了文档，将地址也更改了，遇到这种问题就找对应官网，认真看文档就可以解决问题</p></li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/grow-pro/Work/Vue Proxy代理解决跨域.html" class="prev">
        Vue Proxy代理解决跨域的使用记录
      </a></span> <span class="next"><a href="/grow-pro/Work/el-table横向滚动条视窗显示.html">
        /Work/el-table横向滚动条视窗显示.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/grow-pro/assets/js/app.6ffc7541.js" defer></script><script src="/grow-pro/assets/js/2.d587827d.js" defer></script><script src="/grow-pro/assets/js/26.b3435ff0.js" defer></script>
  </body>
</html>
